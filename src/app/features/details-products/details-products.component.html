@if (product) {
  <div class="product-detail">
    <nav class="breadcrumb">
      <a routerLink="/">Inicio</a>
      <span>/</span>
      <a routerLink="/products">Productos</a>
      <span>/</span>
      <span>{{ product.nombre }}</span>
    </nav>

    <section class="product-grid">
      <div class="gallery">
        <div class="thumbnails">
          @for (thumb of thumbnailImages; track $index) {
            <button
              type="button"
              class="thumbnail"
              [class.active]="selectedImage === thumb"
              (click)="selectImage(thumb)"
              [attr.aria-label]="'Ver imagen ' + ($index + 1)"
            >
              <img [src]="thumb" [alt]="product.nombre + ' vista ' + ($index + 1)">
            </button>
          }
        </div>
        <div class="main-image">
          <img [src]="selectedImage" [alt]="product.nombre" loading="lazy">
        </div>
      </div>

      <div class="info-panel">
        <p class="eyebrow">{{ product.coleccion }}</p>
        <h1>{{ product.nombre }}</h1>
        <p class="price">{{ formatPrice(product.precio) }}</p>
        <p class="payment-note">Impuestos incluidos &middot; Env&iacute;o gratis en Colombia</p>

        <div class="color-picker">
          <div class="picker-header">
            <p>Color</p>
            <span>{{ selectedColor }}</span>
          </div>
          <div class="color-list">
            @for (color of product.colores; track color) {
              <button
                type="button"
                class="color-chip"
                [class.selected]="selectedColor === color"
                (click)="selectColor(color)"
                [style.--chip-color]="color"
                [attr.aria-label]="'Color ' + color"
              >
                <span class="swatch"></span>
              </button>
            }
          </div>
        </div>

        <div class="quantity-block">
          <p>Cantidad</p>
          <div class="quantity-selector">
            <button type="button" (click)="decrement()" aria-label="Disminuir cantidad">&#8722;</button>
            <span>{{ quantity }}</span>
            <button type="button" (click)="increment()" aria-label="Aumentar cantidad">+</button>
          </div>
        </div>

        <div class="actions">
          <button type="button" class="btn primary" (click)="buyNow()">Comprar Ahora</button>
          <button type="button" class="btn secondary" (click)="addToCart()">Agregar al Carrito</button>
        </div>

        <button type="button" class="favorite-link">&#9825; A&ntilde;adir a favoritos</button>
      </div>
    </section>

    <section class="description-section">
      <article class="rich-copy">
        <h2>Descripci&oacute;n</h2>
        <p>
          La {{ product.nombre }} es una pieza artesanal unica que captura la esencia del mar y la suavidad de los tonos naturales.
          Confeccionada a mano con materiales locales de alta calidad, esta bolsa combina un dise&ntilde;o elegante y fresco,
          ideal para acompa&ntilde;arte en tus dias de playa, paseos casuales o actividades cotidianas.
        </p>
        <p>
          Cada hilo ha sido tejido a mano por artesanas expertas, resaltando la autenticidad y la calidad del trabajo artesanal.
          El interior esta forrado con una tela ligera y fresca que protege tus objetos personales, mientras que los detalles
          reforzados aseguran una experiencia comoda y segura en cada uso.
        </p>

        <h3>Caracteristicas</h3>
        <p>
          La Bolsa Beige de Mar esta elaborada con fibras naturales provenientes de materiales locales que garantizan resistencia y durabilidad
          sin perder la suavidad al tacto. Cada pieza incluye detalles en cuerda y acabados reforzados que elevan la experiencia diaria.
        </p>
      </article>

      <aside class="dimensions">
        <h3>Dimensiones</h3>
        <dl>
          <div>
            <dt>Alto</dt>
            <dd>{{ displayDimensions?.alto }}</dd>
          </div>
          <div>
            <dt>Ancho</dt>
            <dd>{{ displayDimensions?.ancho }}</dd>
          </div>
          <div>
            <dt>Profundidad</dt>
            <dd>{{ displayDimensions?.profundidad }}</dd>
          </div>
          <div>
            <dt>Capacidad</dt>
            <dd>{{ displayDimensions?.capacidad }}</dd>
          </div>
        </dl>
      </aside>
    </section>

    <section class="reviews-panel">
      <h2>Opiniones de los Clientes</h2>
      <div class="reviews">
        @for (review of reviews; track review.name) {
          <article class="review">
            <div class="review-header">
              <p class="review-name">{{ review.name }}</p>
              <p class="review-date">{{ review.date }}</p>
            </div>
            <div class="stars">
              @for (star of stars; track $index) {
                <span [class.filled]="$index < review.rating">&#9733;</span>
              }
            </div>
            <p class="review-comment">{{ review.comment }}</p>
          </article>
        }
      </div>
    </section>
  </div>
} @else {
  <div class="loading-state">
    <i class="fas fa-spinner fa-spin"></i>
    <p>Cargando producto...</p>
  </div>
}
