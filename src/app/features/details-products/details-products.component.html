@if (product) {
    <!-- Detalle del producto -->
    <section class="detalle-producto">
        <div class="galeria-miniaturas">
            <!-- Miniaturas - Por ahora solo mostrar la imagen principal -->
        </div>

        <div class="imagen-principal">
            <img [src]="selectedImage" [alt]="product.nombre">
        </div>

        <div class="info-producto">
            <h1>{{ product.nombre }}</h1>
            <p class="precio">{{ formatPrice(product.precio) }}</p>

            <label>Color</label>
            <div class="color-options">
                @for (color of product.colores; track color) {
                    <button
                        [class.selected]="selectedColor === color"
                        (click)="selectColor(color)"
                        class="color-option">
                        {{ color }}
                    </button>
                }
            </div>

            <label>Cantidad</label>
            <div class="cantidad">
                <button (click)="decrement()">−</button>
                <span>{{ quantity }}</span>
                <button (click)="increment()">+</button>
            </div>

            <div class="acciones">
                <button class="btn-comprar" (click)="buyNow()">Comprar Ahora</button>
                <button class="btn-agregar" (click)="addToCart()">Agregar al Carrito</button>
            </div>

            <div class="favorito"><i class="far fa-heart"></i> Añadir a favoritos</div>

            @if (product.stock < 5) {
                <p style="color: #e74c3c; font-size: 14px; margin-top: 10px;">
                    <i class="fas fa-exclamation-circle"></i> Solo quedan {{ product.stock }} unidades
                </p>
            }
        </div>
    </section>

    <!-- Descripción -->
    <section class="detalle-extra">
        <h3>Descripción</h3>
        <p>{{ product.descripcion }}</p>

        @if (product.caracteristicas) {
            <h3>Características</h3>
            <p>{{ product.caracteristicas }}</p>
        }

        @if (product.dimensiones) {
            <h3>Dimensiones</h3>
            <table>
                <tr>
                    <td>Alto</td>
                    <td>{{ product.dimensiones.alto }}</td>
                </tr>
                <tr>
                    <td>Ancho</td>
                    <td>{{ product.dimensiones.ancho }}</td>
                </tr>
                <tr>
                    <td>Profundidad</td>
                    <td>{{ product.dimensiones.profundidad }}</td>
                </tr>
                <tr>
                    <td>Capacidad</td>
                    <td>{{ product.dimensiones.capacidad }}</td>
                </tr>
            </table>
        }
    </section>
} @else {
    <div style="text-align: center; padding: 60px; color: #666;">
        <i class="fas fa-spinner fa-spin" style="font-size: 48px;"></i>
        <p style="margin-top: 20px;">Cargando producto...</p>
    </div>
}