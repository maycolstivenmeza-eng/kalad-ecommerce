<div class="coleccion-container">

  <div class="breadcrumb">
    INICIO / PRODUCTOS
  </div>

  <div class="layout">

    <aside class="filtros-left">

      <div class="filtro" (click)="toggle(0)">
        <span>Ordenar por</span>
        <span class="flecha" [class.open]="open[0]">&#9662;</span>
      </div>

      <div class="filtro-opciones" *ngIf="open[0]">
        <button
          *ngFor="let o of ordenOpciones"
          type="button"
          (click)="onOrderChange(o)"
          [class.activo]="o === filtroOrden">
          {{ getOrderLabel(o) }}
        </button>
      </div>

      <div class="filtro" (click)="toggle(1)">
        <span>Talla</span>
        <span class="flecha" [class.open]="open[1]">&#9662;</span>
      </div>

      <div class="filtro-opciones" *ngIf="open[1]">
        <button
          *ngFor="let talla of tallas"
          type="button"
          (click)="setFiltroTalla(talla)"
          [class.activo]="talla === filtroTalla">
          {{ talla }}
        </button>
      </div>

      <div class="filtro" (click)="toggle(2)">
        <span>Color</span>
        <span class="flecha" [class.open]="open[2]">&#9662;</span>
      </div>

      <div class="filtro-opciones" *ngIf="open[2]">
        <button
          *ngFor="let color of colores"
          type="button"
          (click)="seleccionarColeccion(color.id)"
          [class.activo]="color.id === filtroColor">
          {{ color.label }}
        </button>
      </div>

      <div class="linea-unica"></div>

      <div
        class="categoria"
        *ngFor="let categoria of categorias"
        (click)="seleccionarCategoria(categoria)"
        [class.activo]="categoria === filtroCategoria">
        {{ categoria }}
      </div>

    </aside>

    <div class="contenido">

      <div class="ordenar-right">
        <span>Ordenar por:</span>
        <span class="az">{{ getOrderLabel(filtroOrden) }}</span>
        <span class="arrow small">&#9662;</span>
      </div>

      <div class="product-grid">
        <article class="product-card" *ngFor="let p of productosFiltrados" [attr.data-id]="p.id">
          <a class="thumb" [routerLink]="['/products', p.id]">
            <span class="badge" *ngIf="p.badge" [ngClass]="p.badge">
              {{ p.badge }}
            </span>
            <img
              class="img primary"
              [src]="resolveImage(p)"
              [alt]="p.nombre"
              (error)="onImageError($event)"
            />
            <img
              class="img hover"
              *ngIf="p.imagenes && p.imagenes.length > 0"
              [src]="p.imagenes[0]"
              [alt]="p.nombre" />
          </a>

          <a class="title" [routerLink]="['/products', p.id]">
            {{ p.nombre }}
          </a>

          <div class="price-row">
            <span class="price">{{ p.precio | currency:'COP':'symbol-narrow':'1.0-0' }}</span>
            <button class="cart-btn" type="button" (click)="addToCart(p)">
              <span class="cart-icon" aria-hidden="true">?Y>'</span>
            </button>
          </div>
        </article>
      </div>

    </div>

  </div>
</div>
